setwd("C:/+STRAUCH+/+PAPER_WORK+/Opti-Tool/CoMOLA_basic/models/SYM")
sink("C:/+STRAUCH+/+PAPER_WORK+/Opti-Tool/CoMOLA_basic/models/SYM/console.txt", append=FALSE)
##########################################################################################
#
#     ~ ~ ~ Simple Yield Model (SYM) ~ ~ ~
#     ~ ~ ~ this is just a toy model ~ ~ ~
#     ~ ~ ~ Input data ~ ~ ~
#    land_use.asc        |land use map containing the following classes
#                        |1,2,3,4,5 = arable land with increasing intensity from 1 to 5
#                        |6 = forest
#                        |7 = pasture
#                        |8 = urban area
#                        |-2 = no data
#
#    soil_fertility.asc  |map on soil fertility which can range from 0.1 to 1
#
#    Objective: Maximize crop yield
#
##########################################################################################

# set working directory

# read in ascii files
lu.map <- read.table("map.asc", h=F, skip=6, sep=" ")
fert.map <- read.table("soil_fertility.asc", h=F, skip=6, sep=" ")

# array index for arable land
arable.idx <- which(lu.map <= 5 & lu.map > 0, arr.ind=T)

# calculate crop yield as logarithmic function of intensity and soil fertility
yield <- log(lu.map[arable.idx] * (1 + fert.map[arable.idx]))
yield[is.na(yield)] <- 0
yield.sum <- sum(yield)

# write model output
write.table(yield.sum , "SYM_output.csv",append=FALSE ,sep =";",col.names=FALSE ,row.names=FALSE)






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































sink()
